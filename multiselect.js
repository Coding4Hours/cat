Array.prototype.search=function(e){for(let t=0;t<this.length;t++)if(this[t]===e)return t;return-1};var Multiselect=function(e){if(!$(e)){console.error("ERROR: Element %s does not exist.",e);return}this.selector=e;this.selections=[];this.events()};Multiselect.prototype={open:function(e){$(this.selector+".multiselect").toggleClass("active")},close:function(){$(this.selector+".multiselect").removeClass("active")},events:function(){let e=this;$(document).on("click",e.selector+".multiselect > .title",t=>{"close-icon"!==t.target.className&&e.open()});$(document).on("click",e.selector+".multiselect option",function(){let t=$(this).attr("value"),i=e.selections.search(t);i<0?e.selections.push(t):e.selections.splice(i,1);e.selectionStatus();e.setSelectionsString()});$(document).on("click",e.selector+".multiselect > .title > .close-icon",()=>e.clearSelections());$(document).click(function(t){if(!["title","text","-icon"].some(n=>t.target.className.includes(n))&&!("selected"===t.target.className&&"option"===t.target.localName))e.close()})},selectionStatus:function(){let e=$(this.selector+".multiselect");this.selections.length?e.addClass("selection"):e.removeClass("selection")},clearSelections:function(){this.selections=[];this.selectionStatus();this.setSelectionsString()},getSelections:function(){return this.selections},setSelectionsString:function(){let e=this.getSelectionsString().split(", "),t=$(this.selector+".multiselect option");$(this.selector+".multiselect > .title").attr("title",e);e[0]!=="Select"?$("#img").attr("src","https://cataas.com/cat/"+e.join(",")):$("#img").attr("src","https://cataas.com/cat");$(this.selector+".multiselect > .title > .text").text(e.length>6?e.splice(0,6)+" [...]":e);for(let i=0;i<t.length;i++)$(t[i]).removeClass("selected");e.forEach(e=>{t.each((t,n)=>{$(n).attr("value")===e&&$(n).addClass("selected")})})},getSelectionsString:function(){return this.selections.length>0?this.selections.join(", "):"Select"},setSelections:function(e){Array.isArray(e)&&(this.selections=e,this.selectionStatus(),this.setSelectionsString())}};$(document).ready(()=>{new Multiselect("#countries")});
